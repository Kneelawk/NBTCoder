dependencies {
    api project(':nbt')
    implementation project(':utils')

    testImplementation project(':testutils')
    testImplementation project(':testnbtlanguage')
}

compileJava {
    doFirst {
        // work around for bug where antlr generated files are not added to the compileJava source path
        options.sourcepath = project.files(sourceSets.main.java.srcDirs)
    }
}

compileTestJava {
    moduleOptions {
        addModules = ['com.github.kneelawk.nbtcoder.test.utils', 'com.github.kneelawk.nbtcoder.test.nbtlanguage']
        addReads = ['com.github.kneelawk.nbtcoder.nbtlanguage': 'com.github.kneelawk.nbtcoder.test.utils,com.github.kneelawk.nbtcoder.test.nbtlanguage']
    }
}

test {
    moduleOptions {
        addOpens = [("$moduleName/$moduleName".toString()): 'org.junit.jupiter.params']
    }
}
